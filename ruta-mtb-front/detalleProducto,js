document.addEventListener("DOMContentLoaded", () => {
  // Obtener el par√°metro id de la URL
  const params = new URLSearchParams(window.location.search);
  const idProducto = parseInt(params.get("id"));

  if (!idProducto) {
    document.getElementById("detalleProducto").innerHTML =
      "<p class='text-danger'>Producto no encontrado</p>";
    return;
  }

  // Cargar productos
  fetch("data/productos.json")
    .then(res => res.json())
    .then(productos => {
      const producto = productos.find(p => p.id === idProducto);

      if (producto) {
        document.getElementById("detalleProducto").innerHTML = `
          <div class="col-md-6">
            <img src="${producto.imagen}" alt="${producto.nombre}" class="img-fluid rounded">
          </div>
          <div class="col-md-6">
            <h2>${producto.nombre}</h2>
            <p class="text-muted">${producto.descripcion}</p>
            <h3 class="text-success">$ ${producto.precio.toLocaleString("es-CO")}</h3>
            <button class="btn btn-dark mt-3">Agregar al carrito</button>
          </div>
        `;
      } else {
        document.getElementById("detalleProducto").innerHTML =
          "<p class='text-danger'>Producto no encontrado</p>";
      }
    })
    .catch(err => {
      console.error("Error cargando producto:", err);
      document.getElementById("detalleProducto").innerHTML =
        "<p class='text-danger'>Error al cargar los datos</p>";
    });
});
